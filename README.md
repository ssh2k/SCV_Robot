# SCV Robot - ì´ë™í˜• ì„ ë°˜ ë¡œë´‡

ì•„ë‘ì´ë…¸ WiFi R4 ë³´ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ììœ¨ì£¼í–‰ ì´ë™í˜• ì„ ë°˜ ë¡œë´‡ì…ë‹ˆë‹¤. BLE ë¹„ì½˜ì„ í†µí•œ ìœ„ì¹˜ ì¸ì‹ê³¼ A* ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•œ ê²½ë¡œ íƒìƒ‰, WiFië¥¼ í†µí•œ ì›ê²© ì œì–´ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

## ì£¼ìš” ê¸°ëŠ¥

### ğŸ¤– ë¡œë´‡ ì œì–´
- **ëª¨í„° ì œì–´**: PWMì„ í†µí•œ ì •ë°€í•œ ì†ë„ ì œì–´
- **ë°©í–¥ ì œì–´**: ì „ì§„, í›„ì§„, ì¢ŒíšŒì „, ìš°íšŒì „, ê³¡ì„  ì´ë™
- **ì•ˆì „ ê¸°ëŠ¥**: ê¸´ê¸‰ ì •ì§€, ë¶€ë“œëŸ¬ìš´ ì •ì§€, ì†ë„ ì œí•œ
- **ìº˜ë¦¬ë¸Œë ˆì´ì…˜**: ëª¨í„° ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ë° í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥

### ğŸ“¡ ìœ„ì¹˜ ì¸ì‹
- **BLE ë¹„ì½˜**: 3ê°œì˜ ë¹„ì½˜ì„ í†µí•œ ì‚¼ê°ì¸¡ëŸ‰
- **ì‹¤ì‹œê°„ ìœ„ì¹˜ ì¶”ì **: RSSI ê¸°ë°˜ ê±°ë¦¬ ì¸¡ì •
- **ìœ„ì¹˜ ì‹ ë¢°ë„**: ì¸¡ì • ì •í™•ë„ í‰ê°€

### ğŸ—ºï¸ ê²½ë¡œ íƒìƒ‰
- **A* ì•Œê³ ë¦¬ì¦˜**: ìµœì  ê²½ë¡œ íƒìƒ‰
- **ì¥ì• ë¬¼ íšŒí”¼**: ë™ì  ì¥ì• ë¬¼ ê°ì§€ ë° íšŒí”¼
- **ê²½ë¡œ ìµœì í™”**: ë¶ˆí•„ìš”í•œ ê²½ìœ ì  ì œê±°

### ğŸŒ ì›ê²© ì œì–´
- **WiFi í†µì‹ **: HTTP API ê¸°ë°˜ ëª…ë ¹ ìˆ˜ì‹ 
- **REST API**: JSON ê¸°ë°˜ ëª…ë ¹ ì²˜ë¦¬ ë° ì‘ë‹µ
- **ì½œë°± íŒ¨í„´**: ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ëŠìŠ¨í•œ ê²°í•©
- **ì…ë ¥ ê²€ì¦**: ëª…ë ¹ ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
Next.js App (UI/UX)
    â†“ HTTP API í˜¸ì¶œ
Communication (ëª…ë ¹ ìˆ˜ì‹ /íŒŒì‹±)
    â†“ ì½œë°± í•¨ìˆ˜
Main Controller (ë¡œë´‡ ì œì–´ ë¡œì§)
    â†“ ëª¨ë“ˆ í˜¸ì¶œ
MotorControl | BeaconManager | Pathfinder
```

## í•˜ë“œì›¨ì–´ ìš”êµ¬ì‚¬í•­

### í•„ìˆ˜ êµ¬ì„±í’ˆ
- **ì•„ë‘ì´ë…¸ WiFi R4** (ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬)
- **DC ëª¨í„° 2ê°œ** (ì¢Œìš° ë°”í€´ êµ¬ë™)
- **ëª¨í„° ë“œë¼ì´ë²„** (L298N ë˜ëŠ” H-ë¸Œë¦¬ì§€)
- **BLE ë¹„ì½˜ 3ê°œ** (ìœ„ì¹˜ ì¸ì‹ìš©)
- **ë°°í„°ë¦¬** (12V ê¶Œì¥)

### ì„ íƒ êµ¬ì„±í’ˆ
- **ì´ˆìŒíŒŒ ì„¼ì„œ** (ì¥ì• ë¬¼ ê°ì§€)
- **ìì´ë¡œìŠ¤ì½”í”„** (ë°©í–¥ ì„¼ì„œ)
- **ì—”ì½”ë”** (ì •ë°€í•œ ìœ„ì¹˜ ì¶”ì )

## ì†Œí”„íŠ¸ì›¨ì–´ êµ¬ì¡°

```
SCV_Robot/
â”œâ”€â”€ SCV_Robot.ino          # ë©”ì¸ í”„ë¡œê·¸ë¨ (ë¡œë´‡ ì œì–´ ë¡œì§)
â”œâ”€â”€ motorControl.h/cpp     # ëª¨í„° ì œì–´ ëª¨ë“ˆ
â”œâ”€â”€ beaconManager.h/cpp    # ë¹„ì½˜ ìœ„ì¹˜ ì¸ì‹ ëª¨ë“ˆ
â”œâ”€â”€ pathfinder.h/cpp       # A* ê²½ë¡œ íƒìƒ‰ ëª¨ë“ˆ
â””â”€â”€ communication.h/cpp    # WiFi í†µì‹  ëª¨ë“ˆ (API ì„œë²„)
```

## ì„¤ì¹˜ ë° ì„¤ì •

### 1. Arduino IDE ì„¤ì •
1. Arduino IDE ì„¤ì¹˜
2. Arduino R4 ë³´ë“œ íŒ¨í‚¤ì§€ ì„¤ì¹˜
3. í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜:
   - `WiFi` (ê¸°ë³¸ í¬í•¨)
   - `BLEDevice` (ê¸°ë³¸ í¬í•¨)
   - `ArduinoJson` (ë¼ì´ë¸ŒëŸ¬ë¦¬ ë§¤ë‹ˆì €ì—ì„œ ì„¤ì¹˜)

### 2. í•˜ë“œì›¨ì–´ ì—°ê²°
```
ëª¨í„° ì—°ê²°:
- LEFT_MOTOR_PWM_PIN: 9
- LEFT_MOTOR_DIR_PIN: 8
- RIGHT_MOTOR_PWM_PIN: 10
- RIGHT_MOTOR_DIR_PIN: 11

ë¹„ì½˜ ì„¤ì •:
- ë¹„ì½˜ 1: (0, 0) ìœ„ì¹˜
- ë¹„ì½˜ 2: (10, 0) ìœ„ì¹˜
- ë¹„ì½˜ 3: (5, 10) ìœ„ì¹˜
```

### 3. ì„¤ì • íŒŒì¼ ìˆ˜ì •
`SCV_Robot.ino`ì—ì„œ ë‹¤ìŒ ì„¤ì •ì„ ìˆ˜ì •í•˜ì„¸ìš”:

```cpp
// WiFi ì„¤ì •
const char* WIFI_SSID = "your_wifi_ssid";
const char* WIFI_PASSWORD = "your_wifi_password";

// ë¹„ì½˜ ì£¼ì†Œ (beaconManager.hì—ì„œ ìˆ˜ì •)
String beaconAddresses[NUM_BEACONS] = {
    "BE:AC:ON:01:02:03",  // ì‹¤ì œ ë¹„ì½˜ ì£¼ì†Œë¡œ ë³€ê²½
    "BE:AC:ON:04:05:06",
    "BE:AC:ON:07:08:09"
};
```

## ì‚¬ìš©ë²•

### 1. ë¡œë´‡ ì‹¤í–‰
1. Arduino IDEì—ì„œ `SCV_Robot.ino` ì—…ë¡œë“œ
2. ì‹œë¦¬ì–¼ ëª¨ë‹ˆí„°ë¡œ ì´ˆê¸°í™” ê³¼ì • í™•ì¸
3. WiFi ì—°ê²° ë° IP ì£¼ì†Œ í™•ì¸

### 2. API ì„œë²„ ì ‘ì†
ë¡œë´‡ì˜ IP ì£¼ì†Œë¡œ HTTP API í˜¸ì¶œ:
```
http://[ë¡œë´‡_IP_ì£¼ì†Œ]/status
```

### 3. ì œì–´ ëª…ë ¹
- **ìœ„ì¹˜ ì´ë™**: POST `/move` ì—”ë“œí¬ì¸íŠ¸ë¡œ ì¢Œí‘œ ì „ì†¡
- **ê¸´ê¸‰ ì •ì§€**: POST `/emergency-stop` ì—”ë“œí¬ì¸íŠ¸ í˜¸ì¶œ
- **ì†ë„ ì¡°ì ˆ**: POST `/set-speed` ì—”ë“œí¬ì¸íŠ¸ë¡œ ì†ë„ ì„¤ì •
- **ìƒíƒœ í™•ì¸**: GET `/status` ì—”ë“œí¬ì¸íŠ¸ë¡œ ìƒíƒœ ì¡°íšŒ

## API ëª…ì„¸

### ì´ë™ ëª…ë ¹
```json
POST /move
Content-Type: application/json

{
    "command": "move_to_position",
    "x": 5.0,
    "y": 3.0,
    "speed": 200
}

Response:
{
    "success": true,
    "message": "Command executed",
    "command": "move_to_position"
}
```

### ìƒíƒœ ì¡°íšŒ
```json
GET /status

Response:
{
    "currentX": 2.5,
    "currentY": 1.8,
    "targetX": 5.0,
    "targetY": 3.0,
    "isMoving": true,
    "currentSpeed": 200,
    "batteryLevel": 85.5,
    "lastError": ""
}
```

### ê¸´ê¸‰ ì •ì§€
```json
POST /emergency-stop
Content-Type: application/json

{
    "command": "emergency_stop"
}

Response:
{
    "success": true,
    "message": "Emergency stop activated"
}
```

### ì†ë„ ì„¤ì •
```json
POST /set-speed
Content-Type: application/json

{
    "speed": 150
}

Response:
{
    "success": true,
    "message": "Speed updated"
}
```

## ê°œë°œ ê°€ì´ë“œ

### ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€
1. í•´ë‹¹ ëª¨ë“ˆì˜ `.h` íŒŒì¼ì— ì¸í„°í˜ì´ìŠ¤ ì •ì˜
2. `.cpp` íŒŒì¼ì— êµ¬í˜„ ì‘ì„±
3. `SCV_Robot.ino`ì—ì„œ ëª¨ë“ˆ í†µí•©
4. í•„ìš”ì‹œ communication ëª¨ë“ˆì— API ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€

### Communication ëª¨ë“ˆ í™•ì¥
```cpp
// ìƒˆë¡œìš´ ëª…ë ¹ íƒ€ì… ì¶”ê°€
enum CommandType {
    // ... ê¸°ì¡´ ëª…ë ¹ë“¤
    CMD_NEW_FEATURE,
    CMD_UNKNOWN
};

// API ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
void Communication::handleNewFeature() {
    // ìƒˆë¡œìš´ ê¸°ëŠ¥ ì²˜ë¦¬
}

// ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì²˜ë¦¬
void handleCommand(const MoveCommand& command) {
    switch(command.type) {
        // ... ê¸°ì¡´ ì¼€ì´ìŠ¤ë“¤
        case CMD_NEW_FEATURE:
            // ìƒˆë¡œìš´ ê¸°ëŠ¥ ì‹¤í–‰
            break;
    }
}
```

### ë””ë²„ê¹…
- ì‹œë¦¬ì–¼ ëª¨ë‹ˆí„°ë¥¼ í†µí•œ ë¡œê·¸ í™•ì¸
- ê° ëª¨ë“ˆë³„ ìƒì„¸í•œ ë””ë²„ê·¸ ë©”ì‹œì§€ ì œê³µ
- API ì‘ë‹µì„ í†µí•œ ìƒíƒœ í™•ì¸

## ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œ
1. **WiFi ì—°ê²° ì‹¤íŒ¨**: SSID/ë¹„ë°€ë²ˆí˜¸ í™•ì¸
2. **ë¹„ì½˜ ì¸ì‹ ì•ˆë¨**: ë¹„ì½˜ ì£¼ì†Œ ë° ê±°ë¦¬ í™•ì¸
3. **ëª¨í„° ë™ì‘ ì•ˆë¨**: í•€ ì—°ê²° ë° ì „ì› ê³µê¸‰ í™•ì¸
4. **ê²½ë¡œ ì°¾ê¸° ì‹¤íŒ¨**: ì¥ì• ë¬¼ ì„¤ì • ë° ê·¸ë¦¬ë“œ í¬ê¸° í™•ì¸
5. **API ì‘ë‹µ ì—†ìŒ**: ì½œë°± í•¨ìˆ˜ ì„¤ì • í™•ì¸

### ì„±ëŠ¥ ìµœì í™”
- ë¹„ì½˜ ìŠ¤ìº” ì£¼ê¸° ì¡°ì •
- ê²½ë¡œ íƒìƒ‰ ê·¸ë¦¬ë“œ í¬ê¸° ìµœì í™”
- ëª¨í„° ì†ë„ ì œí•œ ì„¤ì •
- ë¡œê¹… ë ˆë²¨ ì¡°ì •

## Next.js ì•± ì—°ë™

### í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ
```javascript
// ë¡œë´‡ ì œì–´ ì˜ˆì‹œ
const moveRobot = async (x, y, speed) => {
    const response = await fetch('http://[ë¡œë´‡_IP]/move', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            command: 'move_to_position',
            x: x,
            y: y,
            speed: speed
        })
    });
    return response.json();
};

// ìƒíƒœ ì¡°íšŒ ì˜ˆì‹œ
const getRobotStatus = async () => {
    const response = await fetch('http://[ë¡œë´‡_IP]/status');
    return response.json();
};
```

## ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ í•˜ì— ë°°í¬ë©ë‹ˆë‹¤.

## ê¸°ì—¬í•˜ê¸°

1. Fork the repository
2. Create your feature branch
3. Commit your changes
4. Push to the branch
5. Create a Pull Request

## ì—°ë½ì²˜

í”„ë¡œì íŠ¸ ê´€ë ¨ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì´ìŠˆë¥¼ ë“±ë¡í•´ ì£¼ì„¸ìš”.
